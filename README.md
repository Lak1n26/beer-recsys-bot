# Beer-RecSys

## –°–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã:
- **–î–∞–Ω–∏–ª–∞ –õ—è–ø–∏–Ω** (dlyapin)
- **–í–ª–∞–¥–∏—Å–ª–∞–≤ –ö–∏—Ä–ø–∏—á–æ–≤** (vkirpichov)

## –ö–∞–ø–∏—Ç–∞–Ω –∫–æ–º–∞–Ω–¥—ã:
**–î–∞–Ω–∏–ª–∞ –õ—è–ø–∏–Ω** (dlyapin)

## –í—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:
**–§–∞–Ω, —Ö–æ–±–±–∏**

## –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
**–ë–æ—Ç –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–∏–≤–∞**

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–º–µ–ª—å–µ –ø–æ –ø–∏–≤—É. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∫—É—Å–æ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å–æ—Ä—Ç–∞ –ø–∏–≤–∞, —É—á–∏—Ç—ã–≤–∞—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: –∫—Ä–µ–ø–æ—Å—Ç—å, –≥–æ—Ä–µ—á—å, —Å—Ç–∏–ª—å, –∞—Ä–æ–º–∞—Ç –∏ —Å—Ç—Ä–∞–Ω—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞. –ë–æ—Ç –ø–æ–º–æ–≥–∞–µ—Ç –∫–∞–∫ –Ω–æ–≤–∏—á–∫–∞–º –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Å–µ–±—è –º–∏—Ä –ø–∏–≤–Ω—ã—Ö –≤–∫—É—Å–æ–≤, —Ç–∞–∫ –∏ –æ–ø—ã—Ç–Ω—ã–º —Ü–µ–Ω–∏—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Å–æ—Ä—Ç–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º.

## –û—Ü–µ–Ω–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞:
**MVP –≥–æ—Ç–æ–≤ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω**
TG: @beer_recsys_bot

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

1. **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–∏–≤–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FAISS –∏–Ω–¥–µ–∫—Å –∏ sentence-transformers –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º (–º–æ–¥–µ–ª—å `paraphrase-multilingual-MiniLM-L12-v2`)
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** ‚Äî –ø–æ–¥–±–æ—Ä —Å–æ—Ä—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤–∫—É—Å–æ–≤, —Å—Ç–∏–ª–µ–π, –∫—Ä–µ–ø–æ—Å—Ç–∏ –∏–ª–∏ –ø–æ–≤–æ–¥–∞ (–∫–∞—Ç–∞–ª–æ–≥ 500+ —Å–æ—Ä—Ç–æ–≤)
3. **Food-–ø–µ–π—Ä–∏–Ω–≥** ‚Äî –∫–æ–º–∞–Ω–¥–∞ `/pairing` –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –ø–∏–≤–∞ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –±–ª—é–¥–æ –∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ (—Å—Ç–µ–π–∫, —Å—ã—Ä—ã, –¥–µ—Å–µ—Ä—Ç—ã, –ø–∏–∫–Ω–∏–∫ –∏ —Ç.–¥.)
4. **–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏** ‚Äî –æ—Ü–µ–Ω–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏ (üëç/üëé) –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–¥–±–æ—Ä–æ–∫
5. **–î–µ–ø–ª–æ–π –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –≤ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–æ**

## –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ —Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π —Ä–∞–±–æ—Ç—ã —Ä–µ—à–µ–Ω–∏—è:
https://disk.yandex.ru/i/XfbdTfNgJwYh-g

## –ü—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É –∑–∞–ø—É—Å–∫–∞:
```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
docker compose up --build

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Python (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
python -m app.main
```

**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `app/main.py` (—Ñ—É–Ω–∫—Ü–∏—è `run()`)


## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   cp env.example .env
   ```
   –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `TELEGRAM_TOKEN`, `SESSION_SECRET` –∏ `SOY_TOKEN` (OAuth —Ç–æ–∫–µ–Ω –¥–ª—è YandexGPT).
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker compose up --build -d
   ```
   Compose –ø–æ–¥–Ω–∏–º–µ—Ç —Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `bot`, `db` (PostgreSQL) –∏ `redis`.
   –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.env` (—Å–º. `app/config.py`) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–∫–µ–Ω–∞ –∏
   –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
3. –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ make-—Ç–∞—Ä–≥–µ—Ç –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É pgcli:
   ```bash
   make pgcli
   # –∏–ª–∏ –≤—Ä—É—á–Ω—É—é
   PGGSSENCMODE=disable PGPASSWORD=postgres \
     pgcli postgresql://postgres:postgres@127.0.0.1:5432/postgres
   ```
   –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –ø–∞—Ä–æ–ª–µ–π –º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î:
   ```bash
   make db-reset
   ```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–µ—Ä–≤–∏—Å —á–∏—Ç–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `.env` (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ `env.example`). –ö–ª—é—á–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

- `POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ `postgres17`).
- `DATABASE_URL` ‚Äî SQLAlchemy/asyncpg URL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–∏—Å `db`).
- `REDIS_URL` ‚Äî –∞–¥—Ä–µ—Å Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π FSM.
- `SESSION_STORAGE_PATH` ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫—É–¥–∞ –º–æ–∂–Ω–æ —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å
  —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–µ—Å—Å–∏–π –∏–ª–∏ —Ñ–∞–π–ª—ã FSM.
- `TELEGRAM_TOKEN`, `SESSION_SECRET` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ —Å–µ–∫—Ä–µ—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π.
- `SOY_TOKEN` ‚Äî OAuth-—Ç–æ–∫–µ–Ω (Yandex Cloud) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `https://api.eliza.yandex.net/openai/v1/chat/completions`, –Ω—É–∂–µ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —á–µ—Ä–µ–∑ YandexGPT.
